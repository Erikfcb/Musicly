{"ast":null,"code":"import _defineProperty from \"/Users/erikvardanyan/Desktop/Work/Web/Fullstack/Musicly/server/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/erikvardanyan/Desktop/Work/Web/Fullstack/Musicly/server/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/erikvardanyan/Desktop/Work/Web/Fullstack/Musicly/server/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/erikvardanyan/Desktop/Work/Web/Fullstack/Musicly/server/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/erikvardanyan/Desktop/Work/Web/Fullstack/Musicly/server/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/erikvardanyan/Desktop/Work/Web/Fullstack/Musicly/server/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/erikvardanyan/Desktop/Work/Web/Fullstack/Musicly/server/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/erikvardanyan/Desktop/Work/Web/Fullstack/Musicly/server/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/erikvardanyan/Desktop/Work/Web/Fullstack/Musicly/server/client/src/components/games/GuessTheNote.js\";\nimport React, { Component } from \"react\";\nimport { octaves, all, twoOctaves } from \"../assets/notes/notes\";\nimport \"./GuessTheNote.css\";\nimport axios from \"axios\";\n\nvar GuessTheNote =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(GuessTheNote, _Component);\n\n  function GuessTheNote(props) {\n    var _this;\n\n    _classCallCheck(this, GuessTheNote);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(GuessTheNote).call(this, props));\n    _this.state = {\n      feedback: React.createElement(\"div\", {\n        style: {\n          fontSize: \"1.5em\",\n          marginTop: \"20px\",\n          opacity: \"0\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 11\n        },\n        __self: this\n      }, \"empty\"),\n      newSound: true,\n      difficulty: 1,\n      rerender: false,\n      progress: \"\",\n      tries: \"\",\n      correct: \"\",\n      C: \"blue\",\n      D: \"blue\",\n      E: \"blue\",\n      F: \"blue\",\n      G: \"blue\",\n      A: \"blue\",\n      B: \"blue\"\n    };\n    return _this;\n  }\n\n  _createClass(GuessTheNote, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      console.log(this.state.feedback);\n      var sounds = this.state.difficulty == 2 ? twoOctaves : this.state.difficulty == 3 ? all : octaves.c3;\n      var level = this.state.difficulty == 2 ? \"Medium\" : this.state.difficulty == 3 ? \"Hard\" : \"Easy\";\n      var answer = localStorage.getItem(\"guessTheNote\");\n\n      var getProgress =\n      /*#__PURE__*/\n      function () {\n        var _ref = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee() {\n          var res;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return axios.post(\"/api/progress\", {\n                    level: level,\n                    id: localStorage.getItem(\"token\"),\n                    game: \"guessTheNote\"\n                  });\n\n                case 2:\n                  res = _context.sent;\n\n                  if (res.data.tries !== _this2.state.tries) {\n                    _this2.setState({\n                      progress: res.data.progress,\n                      tries: res.data.tries,\n                      correct: res.data.correct\n                    });\n                  }\n\n                case 4:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        return function getProgress() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n\n      getProgress();\n\n      if (answer == null || this.state.newSound === true) {\n        localStorage.setItem(\"guessTheNote\", Math.floor(Math.random() * sounds.length));\n        this.setState({\n          newSound: false\n        });\n      }\n\n      var change = function change(name, correct) {\n        if (!correct) {\n          var _this2$setState;\n\n          axios.post(\"/api/updateProgress\", {\n            game: \"guessTheNote\",\n            correct: false,\n            id: localStorage.getItem(\"token\"),\n            level: level\n          });\n\n          _this2.setState((_this2$setState = {}, _defineProperty(_this2$setState, name, \"red\"), _defineProperty(_this2$setState, \"feedback\", React.createElement(\"div\", {\n            className: \"feedback\",\n            style: {\n              color: \"red\",\n              fontSize: \"1.5em\"\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 83\n            },\n            __self: this\n          }, \"Try again...\")), _this2$setState));\n        }\n\n        if (correct) {\n          var _this2$setState2;\n\n          axios.post(\"/api/updateProgress\", {\n            game: \"guessTheNote\",\n            correct: true,\n            id: localStorage.getItem(\"token\"),\n            level: level\n          });\n\n          _this2.setState((_this2$setState2 = {}, _defineProperty(_this2$setState2, name, \"green\"), _defineProperty(_this2$setState2, \"feedback\", React.createElement(\"div\", {\n            className: \"feedback\",\n            style: {\n              color: \"green\",\n              fontSize: \"1.5em\"\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 103\n            },\n            __self: this\n          }, \"Well done!\")), _this2$setState2));\n        }\n      };\n\n      var clearColors = function clearColors() {\n        _this2.setState({\n          C: \"blue\",\n          D: \"blue\",\n          E: \"blue\",\n          F: \"blue\",\n          G: \"blue\",\n          A: \"blue\",\n          B: \"blue\"\n        });\n      };\n\n      var rerender = function rerender() {\n        _this2.setState({\n          rerender: !rerender\n        });\n      };\n\n      var playAnswer = function playAnswer(sound, name) {\n        var audio = new Audio(sound);\n        audio.play();\n\n        if (name === sounds[answer].name) {\n          // if the user's right\n          localStorage.setItem(\"guessTheNote\", Math.floor(Math.random() * sounds.length));\n          change(name, true);\n          setTimeout(function () {\n            clearColors();\n            playQuestion(sounds[localStorage.getItem(\"guessTheNote\")].sound);\n          }, 1000);\n        }\n\n        if (name !== sounds[answer].name) {\n          // if the user's wrong\n          change(name, false);\n          setTimeout(function () {\n            rerender();\n          }, 500);\n        }\n\n        _this2.setState({\n          feedback: React.createElement(\"div\", {\n            style: {\n              fontSize: \"1.5em\",\n              marginTop: \"20px\",\n              opacity: \"0\"\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 152\n            },\n            __self: this\n          }, \"empty\")\n        });\n      };\n\n      var playQuestion = function playQuestion(note) {\n        var audio = new Audio(note);\n        audio.play();\n      };\n\n      var buttons = octaves.c3.map(function (note) {\n        return React.createElement(\"button\", {\n          onClick: function onClick() {\n            return playAnswer(note.sound, note.name);\n          },\n          className: \"btn  sound  waves-light \" + _this2.state[note.name],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }, note.name);\n      });\n\n      var difficulty = function difficulty(e) {\n        clearColors();\n\n        _this2.setState({\n          difficulty: e.target.id,\n          newSound: true\n        });\n      };\n\n      var precentage = this.state.progress + \"%\";\n      return React.createElement(\"div\", {\n        className: \"guessTheNote container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"question\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: function onClick() {\n          return playQuestion(sounds[answer].sound);\n        },\n        className: \"btn green sound\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, \"Play\"), React.createElement(\"p\", {\n        style: {\n          fontSize: \"1.5em\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, \"Click \\\"Play\\\" to hear the note\"), React.createElement(\"button\", {\n        onClick: function onClick() {\n          return playQuestion(sounds[0].sound);\n        },\n        className: \"btn teal sound\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, \"C\"), React.createElement(\"p\", {\n        style: {\n          color: \"teal\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, \"reference note\"), React.createElement(\"p\", {\n        style: {\n          fontSize: \"1.5em\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, \"Progress: (\", this.state.correct, \"/\", this.state.tries, \")\", \" \", Math.floor(this.state.progress), \"%\"), React.createElement(\"div\", {\n        class: \"progress\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"determinate\",\n        style: {\n          width: precentage\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }))), this.state.feedback, React.createElement(\"div\", {\n        className: \"answers\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, buttons), React.createElement(\"p\", {\n        style: {\n          fontSize: \"1.5em\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, \"Click the note that fits to the sound you just heard.\"), React.createElement(\"p\", {\n        style: {\n          color: \"teal\",\n          fontSize: \"1.5em\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, \"Level: \", level), React.createElement(\"div\", {\n        className: \"difficulties\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn  waves-light\",\n        id: \"1\",\n        onClick: difficulty,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, \"Easy\"), React.createElement(\"button\", {\n        className: \"btn  waves-light\",\n        id: \"2\",\n        onClick: difficulty,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, \"Medium\"), React.createElement(\"button\", {\n        className: \"btn  waves-light\",\n        id: \"3\",\n        onClick: difficulty,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, \"Hard\")));\n    }\n  }]);\n\n  return GuessTheNote;\n}(Component);\n\nexport default GuessTheNote;","map":{"version":3,"sources":["/Users/erikvardanyan/Desktop/Work/Web/Fullstack/Musicly/server/client/src/components/games/GuessTheNote.js"],"names":["React","Component","octaves","all","twoOctaves","axios","GuessTheNote","props","state","feedback","fontSize","marginTop","opacity","newSound","difficulty","rerender","progress","tries","correct","C","D","E","F","G","A","B","console","log","sounds","c3","level","answer","localStorage","getItem","getProgress","post","id","game","res","data","setState","setItem","Math","floor","random","length","change","name","color","clearColors","playAnswer","sound","audio","Audio","play","setTimeout","playQuestion","note","buttons","map","e","target","precentage","width"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { octaves, all, twoOctaves } from \"../assets/notes/notes\";\nimport \"./GuessTheNote.css\";\nimport axios from \"axios\";\n\nclass GuessTheNote extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      feedback: (\n        <div style={{ fontSize: \"1.5em\", marginTop: \"20px\", opacity: \"0\" }}>\n          empty\n        </div>\n      ),\n      newSound: true,\n      difficulty: 1,\n      rerender: false,\n      progress: \"\",\n      tries: \"\",\n      correct: \"\",\n      C: \"blue\",\n      D: \"blue\",\n      E: \"blue\",\n      F: \"blue\",\n      G: \"blue\",\n      A: \"blue\",\n      B: \"blue\"\n    };\n  }\n  render() {\n    console.log(this.state.feedback)\n    const sounds =\n      this.state.difficulty == 2\n        ? twoOctaves\n        : this.state.difficulty == 3\n        ? all\n        : octaves.c3;\n    const level =\n      this.state.difficulty == 2\n        ? \"Medium\"\n        : this.state.difficulty == 3\n        ? \"Hard\"\n        : \"Easy\";\n\n    let answer = localStorage.getItem(\"guessTheNote\");\n\n    const getProgress = async () => {\n      const res = await axios.post(\"/api/progress\", {\n        level: level,\n        id: localStorage.getItem(\"token\"),\n        game: \"guessTheNote\"\n      });\n\n      if (res.data.tries !== this.state.tries) {\n        this.setState({\n          progress: res.data.progress,\n          tries: res.data.tries,\n          correct: res.data.correct\n        });\n      }\n    };\n    getProgress();\n\n    if (answer == null || this.state.newSound === true) {\n      localStorage.setItem(\n        \"guessTheNote\",\n        Math.floor(Math.random() * sounds.length)\n      );\n      this.setState({ newSound: false });\n    }\n\n    const change = (name, correct) => {\n      if (!correct) {\n        axios.post(\"/api/updateProgress\", {\n          game: \"guessTheNote\",\n          correct: false,\n          id: localStorage.getItem(\"token\"),\n          level: level\n        });\n        this.setState({\n          [name]: \"red\",\n          feedback: (\n            <div\n              className=\"feedback\"\n              style={{ color: \"red\", fontSize: \"1.5em\" }}\n            >\n              Try again...\n            </div>\n          )\n        });\n      }\n\n      if (correct) {\n        axios.post(\"/api/updateProgress\", {\n          game: \"guessTheNote\",\n          correct: true,\n          id: localStorage.getItem(\"token\"),\n          level: level\n        });\n        this.setState({\n          [name]: \"green\",\n          feedback: (\n            <div\n              className=\"feedback\"\n              style={{ color: \"green\", fontSize: \"1.5em\" }}\n            >\n              Well done!\n            </div>\n          )\n        });\n      }\n    };\n\n    const clearColors = () => {\n      this.setState({\n        C: \"blue\",\n        D: \"blue\",\n        E: \"blue\",\n        F: \"blue\",\n        G: \"blue\",\n        A: \"blue\",\n        B: \"blue\"\n      });\n    };\n    const rerender = () => {\n      this.setState({ rerender: !rerender });\n    };\n    const playAnswer = (sound, name) => {\n      const audio = new Audio(sound);\n      audio.play();\n      if (name === sounds[answer].name) {\n        // if the user's right\n        localStorage.setItem(\n          \"guessTheNote\",\n          Math.floor(Math.random() * sounds.length)\n        );\n        change(name, true);\n        setTimeout(() => {\n          clearColors();\n          playQuestion(sounds[localStorage.getItem(\"guessTheNote\")].sound);\n        }, 1000);\n      }\n      if (name !== sounds[answer].name) {\n        // if the user's wrong\n        change(name, false);\n        setTimeout(() => {\n          rerender();\n        }, 500);\n      }\n      this.setState({\n        feedback: (\n          <div style={{ fontSize: \"1.5em\", marginTop: \"20px\", opacity: \"0\" }}>\n            empty\n          </div>\n        )\n      });\n    };\n\n    const playQuestion = note => {\n      const audio = new Audio(note);\n      audio.play();\n    };\n\n    const buttons = octaves.c3.map(note => {\n      return (\n        <button\n          onClick={() => playAnswer(note.sound, note.name)}\n          className={\"btn  sound  waves-light \" + this.state[note.name]}\n        >\n          {note.name}\n        </button>\n      );\n    });\n\n    const difficulty = e => {\n      clearColors();\n      this.setState({ difficulty: e.target.id, newSound: true });\n    };\n\n    const precentage = this.state.progress + \"%\";\n\n    return (\n      <div className=\"guessTheNote container\">\n        <div className=\"question\">\n          <button\n            onClick={() => playQuestion(sounds[answer].sound)}\n            className=\"btn green sound\"\n          >\n            Play\n          </button>\n          <p style={{ fontSize: \"1.5em\" }}>Click \"Play\" to hear the note</p>\n          <button\n            onClick={() => playQuestion(sounds[0].sound)}\n            className=\"btn teal sound\"\n          >\n            C\n          </button>\n          <p style={{ color: \"teal\" }}>reference note</p>\n          <p style={{ fontSize: \"1.5em\" }}>\n            Progress: ({this.state.correct}/{this.state.tries}){\" \"}\n            {Math.floor(this.state.progress)}%\n          </p>\n          <div class=\"progress\">\n            <div class=\"determinate\" style={{ width: precentage }} />\n          </div>\n        </div>\n        {this.state.feedback}\n        <div className=\"answers\">{buttons}</div>\n        <p style={{ fontSize: \"1.5em\" }}>\n          Click the note that fits to the sound you just heard.\n        </p>\n        <p style={{ color: \"teal\", fontSize: \"1.5em\" }}>Level: {level}</p>\n        <div className=\"difficulties\">\n          <button className=\"btn  waves-light\" id=\"1\" onClick={difficulty}>\n            Easy\n          </button>\n          <button className=\"btn  waves-light\" id=\"2\" onClick={difficulty}>\n            Medium\n          </button>\n          <button className=\"btn  waves-light\" id=\"3\" onClick={difficulty}>\n            Hard\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default GuessTheNote;\n"]},"metadata":{},"sourceType":"module"}